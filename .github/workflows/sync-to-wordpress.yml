name: Sync to WordPress (SAFE MODE)

# å®‰å…¨ãªè‡ªå‹•åŒæœŸ - ä¸‹æ›¸ããƒ¢ãƒ¼ãƒ‰ã®ã¿
on:
  push:
    branches: [ main ]
    paths: [ 'articles/**' ]
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Install dependencies
      run: |
        pip install requests pyyaml
    
    - name: Safe WordPress Sync
      env:
        WP_URL: ${{ secrets.WP_URL }}
        WP_USER: ${{ secrets.WP_USER }}
        WP_PASS: ${{ secrets.WP_PASS }}
      run: |
        echo "ğŸ” å®‰å…¨ãªåŒæœŸã‚’é–‹å§‹..."
        python sync_to_wordpress_safe.py
        echo "âœ… ä¸‹æ›¸ãã¨ã—ã¦åŒæœŸå®Œäº†"
